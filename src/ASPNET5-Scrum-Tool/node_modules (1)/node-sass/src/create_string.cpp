#include <nan.h>
#include <stdlib.h>
#include <string.h>
#include "create_string.h"

char* create_string(Nan::MaybeLocal<v8::Value> maybevalue) ***REMOVED***
  v8::Local<v8::Value> value;
  
  if (maybevalue.ToLocal(&value)) ***REMOVED***
    if (value->IsNull() || !value->IsString()) ***REMOVED***
      return 0;
***REMOVED***
  ***REMOVED*** else ***REMOVED***
    return 0;
  ***REMOVED***

  v8::String::Utf8Value string(value);
  char *str = (char *)malloc(string.length() + 1);
  strcpy(str, *string);
  return str;
***REMOVED***
