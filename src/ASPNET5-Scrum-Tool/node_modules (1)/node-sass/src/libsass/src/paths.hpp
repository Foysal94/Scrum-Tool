#ifndef SASS_PATHS_H
#define SASS_PATHS_H

#include <string>
#include <vector>
#include <sstream>


template<typename T>
std::string vector_to_string(std::vector<T> v)
***REMOVED***
  std::stringstream buffer;
  buffer << "[";

  if (!v.empty())
  ***REMOVED***  buffer << v[0]; ***REMOVED***
  else
  ***REMOVED*** buffer << "]"; ***REMOVED***

  if (v.size() == 1)
  ***REMOVED*** buffer << "]"; ***REMOVED***
  else
  ***REMOVED***
    for (size_t i = 1, S = v.size(); i < S; ++i) buffer << ", " << v[i];
    buffer << "]";
  ***REMOVED***

  return buffer.str();
***REMOVED***

namespace Sass ***REMOVED***


  template<typename T>
  std::vector<std::vector<T> > paths(std::vector<std::vector<T> > strata, size_t from_end = 0)
  ***REMOVED***
    if (strata.empty()) ***REMOVED***
      return std::vector<std::vector<T> >();
***REMOVED***

    size_t end = strata.size() - from_end;
    if (end <= 1) ***REMOVED***
      std::vector<std::vector<T> > starting_points;
      starting_points.reserve(strata[0].size());
      for (size_t i = 0, S = strata[0].size(); i < S; ++i) ***REMOVED***
        std::vector<T> starting_point;
        starting_point.push_back(strata[0][i]);
        starting_points.push_back(starting_point);
  ***REMOVED***
      return starting_points;
***REMOVED***

    std::vector<std::vector<T> > up_to_here = paths(strata, from_end + 1);
    std::vector<T>          here       = strata[end-1];

    std::vector<std::vector<T> > branches;
    branches.reserve(up_to_here.size() * here.size());
    for (size_t i = 0, S1 = up_to_here.size(); i < S1; ++i) ***REMOVED***
      for (size_t j = 0, S2 = here.size(); j < S2; ++j) ***REMOVED***
        std::vector<T> branch = up_to_here[i];
        branch.push_back(here[j]);
        branches.push_back(branch);
  ***REMOVED***
***REMOVED***

    return branches;
  ***REMOVED***

***REMOVED***

#endif
